/* Apple Float Bar minimal styles (no hard height cap) */

.apple-floatbar-root {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: stretch; /* fill window vertically */
  justify-content: stretch; /* fill window horizontally */
  pointer-events: none;
  z-index: 9999;
}

.apple-floatbar-root > * { pointer-events: auto; }

.apple-floatbar-root.mini { align-items: flex-start; justify-content: flex-start; padding: 20px; }

.apple-bar-container {
  width: 100%;
  max-width: 360px; /* fixed width; height grows dynamically via JS */
  height: 100%;
  min-height: 70px;
  min-width: 0;
  display: flex;
  flex-direction: column;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.18);
  overflow: hidden;
  animation: expandIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.apple-bar-glass {
  flex: 1;
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden; /* prevent parent scrolling; only messages scroll */
  border-radius: inherit;
  background: linear-gradient(135deg, rgba(255,255,255,0.10) 0%, rgba(255,255,255,0.05) 100%), rgba(26,26,31,0.72);
  backdrop-filter: blur(40px) saturate(1.6);
  -webkit-backdrop-filter: blur(40px) saturate(1.6);
  box-shadow: 0 20px 70px rgba(0,0,0,0.55), inset 0 1px 0 rgba(255,255,255,0.15), inset 0 -1px 0 rgba(0,0,0,0.3);
  padding: 8px;
  gap: 8px;
  position: relative;
  min-height: 0; /* allow children to shrink for inner scrolling */
}

.platform-mac .apple-bar-glass { backdrop-filter: none; -webkit-backdrop-filter: none; background: rgba(26,26,31,0.5); }

.apple-drag-strip { height: 6px; -webkit-app-region: drag; }
.apple-toolbar, .apple-tool-btn, .apple-input-area, .apple-input, .apple-send-btn { -webkit-app-region: no-drag; }

.apple-toolbar { display: flex; justify-content: flex-end; gap: 6px; padding: 0 4px 0; position: relative; z-index: 1; flex-shrink: 0; }
.apple-tool-btn { width: 32px; height: 32px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.15); color: rgba(255,255,255,0.9); display:flex; align-items:center; justify-content:center; cursor:pointer; transition: all 0.15s ease; }
.apple-tool-btn:hover { background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.25); transform: translateY(-1px); color: white; }

.apple-messages { flex: 1 1 auto; overflow-y: auto; padding: 8px; display: flex; flex-direction: column; gap: 12px; position: relative; z-index: 1; }
.apple-messages { min-height: 0; }
.apple-messages { overscroll-behavior: contain; -webkit-overflow-scrolling: touch; }

/* Top-left logo */
.apple-bar-logo {
  position: absolute;
  top: 28px; /* moved up 2px */
  left: 15px; /* moved right 5px */
  width: 26px;
  height: 26px;
  background-image: url('/AgentMaxLogo.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,0.35));
  pointer-events: none;
  z-index: 2;
}

.apple-message { max-width: 85%; animation: messageIn 0.2s ease; }
.apple-message-user { align-self: flex-end; }
.apple-message-assistant { align-self: flex-start; }
.apple-message-content { padding: 10px 14px; border-radius: 12px; font-size: 14px; line-height: 1.4; position: relative; }
.apple-message-user .apple-message-content { background: linear-gradient(135deg, #007AFF, #0051D5); color: white; box-shadow: 0 2px 8px rgba(0,122,255,0.3); }
.apple-message-assistant .apple-message-content { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.95); border: 1px solid rgba(255,255,255,0.15); }

.apple-input-area { display: flex; gap: 8px; padding: 4px; position: relative; z-index: 1; flex-shrink: 0; }
.apple-input { flex:1; height: 36px; padding: 0 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 18px; color:white; font-size:14px; outline:none; transition: all 0.2s ease; }
.apple-send-btn { width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg,#007AFF,#0051D5); border:none; color:white; display:flex; align-items:center; justify-content:center; cursor:pointer; transition: all 0.2s ease; box-shadow: 0 2px 8px rgba(0,122,255,0.3); }

@keyframes expandIn { from { opacity:0; transform: scale(0.95) translateY(-10px);} to { opacity:1; transform: scale(1) translateY(0);} }
@keyframes messageIn { from { opacity:0; transform: translateY(10px);} to { opacity:1; transform: translateY(0);} }

.apple-message-thinking { align-self: flex-start; display: flex; align-items: center; gap: 8px; }
.typing-indicator { display: inline-flex; align-items: center; gap: 6px; padding: 8px 10px; border-radius: 12px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.12); }
.typing-text { color: rgba(255,255,255,0.9); font-size: 12px; }
.typing-dot { width: 6px; height: 6px; border-radius: 50%; background: rgba(255,255,255,0.9); display: inline-block; animation: typingBounce 1.2s infinite ease-in-out; }
.typing-dot:nth-child(2) { animation-delay: 0.15s; }
.typing-dot:nth-child(3) { animation-delay: 0.3s; }
@keyframes typingBounce { 0%, 80%, 100% { transform: translateY(0); opacity: 0.6; } 40% { transform: translateY(-4px); opacity: 1; } }
